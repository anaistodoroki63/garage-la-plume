<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Garage La Plume</title>

<style>
body {
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
    background: #1c1c1c;
    color: #f5f5f5;
}

header, footer {
    background: #111;
    padding: 20px;
    border-bottom: 4px solid #c30000;
}

footer {
    border-top: 4px solid #c30000;
    text-align: center;
}

nav ul {
    list-style: none;
    padding: 0;
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
}

nav a {
    color: white;
    text-decoration: none;
    font-weight: bold;
}

nav a:hover { color: #c30000; }

section {
    padding: 60px 20px;
    max-width: 1100px;
    margin: auto;
}

.hero {
    text-align: center;
    background: linear-gradient(rgba(0,0,0,.7),rgba(0,0,0,.7)),
    url("https://images.unsplash.com/photo-1581579185169-07c97f4c7b5d") center/cover;
    padding: 100px 20px;
}

.hero h2 { color: #c30000; font-size: 40px; }

.services {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
}

.box {
    background: #2a2a2a;
    padding: 20px;
    border-left: 4px solid #c30000;
    margin-bottom: 20px;
}

input, textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    background: #111;
    border: 1px solid #555;
    color: white;
}

button {
    background: #c30000;
    border: none;
    padding: 12px;
    color: white;
    cursor: pointer;
}

button:hover { background: red; }

.hidden { display: none; }

.calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 6px;
}

.day {
    background: #222;
    padding: 5px;
    min-height: 70px;
    border: 1px solid #444;
}

.day strong { color: #c30000; }

.event {
    font-size: 11px;
    background: #111;
    margin-top: 4px;
    padding: 3px;
    border-left: 3px solid #c30000;
}
</style>
</head>

<body>

<header>
<h1>Garage La Plume</h1>
<nav>
<ul>
<li><a href="#accueil">Accueil</a></li>
<li><a href="#services">Services</a></li>
<li><a href="#contact">Contact</a></li>
<li><a href="#employe">Employ√©</a></li>
</ul>
</nav>
</header>

<section class="hero" id="accueil">
<h2>Garage Automobile de Confiance</h2>
<p>R√©paration ‚Ä¢ Entretien ‚Ä¢ Diagnostic</p>
</section>

<section id="services">
<h2>Nos Services</h2>
<div class="services">
<div class="box"><h3>üîß R√©paration</h3></div>
<div class="box"><h3>üõ¢ D√©pannage</h3></div>
<div class="box"><h3>üíª Diagnostic</h3></div>
<div class="box"><h3>üöó Contr√¥le</h3></div>
</div>
</section>

<section id="contact">
<h2>Contact</h2>
<form class="box">
<input placeholder="Nom">
<input placeholder="Email">
<textarea placeholder="Message"></textarea>
<button>Envoyer</button>
</form>
</section>

<!-- ====== ESPACE EMPLOY√â (MODIFI√â) ====== -->
<section id="employe">
<h2>Espace Employ√© üîê</h2>

<div class="box" id="loginBox">
<input id="user" placeholder="Identifiant">
<input id="pass" type="password" placeholder="Mot de passe">
<button onclick="login()">Connexion</button>
<p id="msg" style="color:red;"></p>
</div>

<div id="dashboard" class="hidden box">
<h3 id="roleText"></h3>

<h4>üìÖ Planning</h4>
<div class="calendar" id="calendar"></div>
<input type="date" id="eventDate">
<input placeholder="Entretien / Client" id="eventText">
<button onclick="addEvent()">Ajouter</button>

<h4>üïí Pointage</h4>
<button onclick="clock('Entr√©e')">Entr√©e</button>
<button onclick="clock('Sortie')">Sortie</button>
<ul id="clockList"></ul>

<h4>üìÇ Documents</h4>
<input type="file" id="fileInput">
<button onclick="uploadFile()">Uploader</button>
<ul id="fileList"></ul>

<div id="adminPanel" class="hidden">
<h4>‚öôÔ∏è Administration (Patron)</h4>
<input id="newUser" placeholder="Nouvel employ√©">
<input id="newPass" placeholder="Mot de passe">
<button onclick="addUser()">Ajouter</button>
<ul id="userList"></ul>
</div>

<button onclick="logout()">D√©connexion</button>
</div>
</section>

<footer>
<p>&copy; 2026 Garage La Plume</p>
</footer>

<script>
/* ===== COMPTES PAR D√âFAUT ===== */
if (!localStorage.users) {
    localStorage.users = JSON.stringify([
        { user: "patron", pass: "patron123", role: "Patron" },
        { user: "jean", pass: "jean123", role: "Employ√©" },
        { user: "paul", pass: "paul123", role: "Employ√©" }
    ]);
}

let currentUser = null;

/* ===== LOGIN ===== */
function login() {
    const users = JSON.parse(localStorage.users);
    const found = users.find(u => u.user === user.value && u.pass === pass.value);

    if (!found) {
        msg.textContent = "Identifiants incorrects";
        return;
    }

    currentUser = found;
    roleText.textContent = `${found.user} (${found.role})`;

    loginBox.classList.add("hidden");
    dashboard.classList.remove("hidden");
    msg.textContent = "";

    if (found.role === "Patron") adminPanel.classList.remove("hidden");
    else adminPanel.classList.add("hidden");

    loadCalendar();
    loadClock();
    loadFiles();
}

/* ===== LOGOUT ===== */
function logout() {
    currentUser = null;
    dashboard.classList.add("hidden");
    loginBox.classList.remove("hidden");
}

/* ===== PLANNING ===== */
function addEvent() {
    if (!eventDate.value || !eventText.value) return;

    const events = JSON.parse(localStorage.events || "{}");
    const key = `${currentUser.user}|${eventDate.value}`;

    if (!events[key]) events[key] = [];
    events[key].push(eventText.value);

    localStorage.events = JSON.stringify(events);
    eventText.value = "";
    loadCalendar();
}

function loadCalendar() {
    calendar.innerHTML = "";

    const now = new Date();
    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, "0");
    const daysInMonth = new Date(year, month, 0).getDate();

    const events = JSON.parse(localStorage.events || "{}");

    for (let d = 1; d <= daysInMonth; d++) {
        const day = String(d).padStart(2, "0");
        const dateKey = `${year}-${month}-${day}`;
        const fullKey = `${currentUser.user}|${dateKey}`;

        const div = document.createElement("div");
        div.className = "day";
        div.innerHTML = `<strong>${d}</strong>`;

        if (events[fullKey]) {
            events[fullKey].forEach(e => {
                const ev = document.createElement("div");
                ev.className = "event";
                ev.textContent = e;
                div.appendChild(ev);
            });
        }

        calendar.appendChild(div);
    }
}

/* ===== POINTAGE ===== */
function clock(type) {
    const clocks = JSON.parse(localStorage.clock || "{}");
    if (!clocks[currentUser.user]) clocks[currentUser.user] = [];

    clocks[currentUser.user].push(
        `${type} - ${new Date().toLocaleString()}`
    );

    localStorage.clock = JSON.stringify(clocks);
    loadClock();
}

function loadClock() {
    clockList.innerHTML = "";
    const clocks = JSON.parse(localStorage.clock || "{}");
    const logs = clocks[currentUser.user] || [];

    logs.forEach(l => {
        const li = document.createElement("li");
        li.textContent = l;
        clockList.appendChild(li);
    });
}

/* ===== DOCUMENTS ===== */
function uploadFile() {
    if (!fileInput.files[0]) return;

    const files = JSON.parse(localStorage.files || "{}");
    if (!files[currentUser.user]) files[currentUser.user] = [];

    files[currentUser.user].push(fileInput.files[0].name);
    localStorage.files = JSON.stringify(files);
    loadFiles();
    fileInput.value = "";
}

function loadFiles() {
    fileList.innerHTML = "";
    const files = JSON.parse(localStorage.files || "{}");
    (files[currentUser.user] || []).forEach(f => {
        const li = document.createElement("li");
        li.textContent = f;
        fileList.appendChild(li);
    });
}

/* ===== ADMIN ===== */
function addUser() {
    if (!newUser.value || !newPass.value) return;

    const users = JSON.parse(localStorage.users);
    users.push({ user: newUser.value, pass: newPass.value, role: "Employ√©" });
    localStorage.users = JSON.stringify(users);

    newUser.value = "";
    newPass.value = "";
    alert("Employ√© ajout√©");
}
</script>


/* ===== LOAD ===== */
function loadAll(){
loadCalendar();loadClock();loadFiles();
}
</script>

</body>
</html>
