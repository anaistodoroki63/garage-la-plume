<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Garage La Plume</title>

<style>
body{margin:0;font-family:Arial;background:#1c1c1c;color:#f5f5f5}
header,footer{background:#111;padding:20px;border-bottom:4px solid #c30000}
footer{border-top:4px solid #c30000;text-align:center}
nav ul{list-style:none;padding:0;display:flex;gap:20px;flex-wrap:wrap}
nav a{color:white;text-decoration:none;font-weight:bold;cursor:pointer}
nav a:hover{color:#c30000}
section{padding:60px 20px;max-width:1100px;margin:auto}
.hero{text-align:center;background:linear-gradient(rgba(0,0,0,.7),rgba(0,0,0,.7)),
url("https://images.unsplash.com/photo-1581579185169-07c97f4c7b5d") center/cover;padding:100px 20px}
.hero h2{color:#c30000;font-size:40px}
.services{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px}
.box{background:#2a2a2a;padding:20px;border-left:4px solid #c30000;margin-bottom:20px}
input,textarea,select{width:100%;padding:10px;margin-bottom:10px;background:#111;border:1px solid #555;color:white}
button{background:#c30000;border:none;padding:12px;color:white;cursor:pointer}
button:hover{background:red}
.hidden{display:none}
.calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
.day{background:#222;padding:8px;min-height:80px;border:1px solid #444}
.day strong{color:#c30000}
.event{font-size:11px;background:#111;margin-top:4px;padding:3px;border-left:3px solid #c30000}
</style>
</head>

<body>

<header>
<h1>Garage La Plume</h1>
<nav>
<ul>
<li><a onclick="showPage('accueil')">Accueil</a></li>
<li><a onclick="showPage('services')">Services</a></li>
<li><a onclick="showPage('recrutement')">Recrutement</a></li>
<li><a onclick="showPage('contact')">Contact</a></li>
<li><a onclick="showPage('employe')">EmployÃ©</a></li>
<li id="serverLink" class="hidden"><a onclick="showPage('server')">Server</a></li>
</ul>
</nav>
</header>

<!-- ACCUEIL -->
<section id="accueil" class="page">
<div class="hero">
<h2>Garage Automobile de Confiance</h2>
<p>RÃ©paration â€¢ Entretien â€¢ Diagnostic</p>
</div>
</section>

<!-- SERVICES -->
<section id="services" class="page hidden">
<h2>Nos Services</h2>
<div class="services">
<div class="box">ğŸ”§ RÃ©paration mÃ©canique</div>
<div class="box">ğŸ›¢ DÃ©pannage</div>
<div class="box">ğŸ’» Diagnostic Ã©lectronique</div>
<div class="box">ğŸš— PrÃ©-contrÃ´le technique</div>
</div>
</section>

<!-- RECRUTEMENT -->
<section id="recrutement" class="page hidden">
<h2>Recrutement</h2>
<div class="box">
<p>Nous recrutons des mÃ©caniciens motivÃ©s.</p>
</div>
</section>

<!-- CONTACT -->
<section id="contact" class="page hidden">
<h2>Contact</h2>
<form class="box">
<input placeholder="Nom">
<input placeholder="Email">
<textarea placeholder="Message"></textarea>
<button>Envoyer</button>
</form>
</section>

<!-- EMPLOYÃ‰ -->
<section id="employe" class="page hidden">
<h2>Espace EmployÃ© ğŸ”</h2>

<div id="loginBox" class="box">
<input id="loginUser" placeholder="Identifiant">
<input id="loginPass" type="password" placeholder="Mot de passe">
<button onclick="login()">Connexion</button>
<p id="msg" style="color:red"></p>
</div>

<div id="dashboard" class="hidden box">
<h3 id="roleText"></h3>

<h4>ğŸ“… Planning</h4>
<div id="calendar" class="calendar"></div>
<input type="date" id="eventDate">
<input id="eventText" placeholder="Entretien / Client">
<button onclick="addEvent()">Ajouter</button>

<h4>ğŸ•’ Pointeuse</h4>
<button onclick="pointeuse('EntrÃ©e')">EntrÃ©e</button>
<button onclick="pointeuse('Sortie')">Sortie</button>
<ul id="clockList"></ul>

<button onclick="logout()">DÃ©connexion</button>
</div>
</section>

<!-- SERVER MANAGEMENT -->
<section id="server" class="page hidden">
<h2>ğŸ–¥ï¸ Server Management</h2>

<div class="box">
<h3>ğŸ‘¥ Comptes utilisateurs</h3>
<ul id="serverUserList"></ul>

<h4>â• Ajouter un employÃ©</h4>
<input id="newUser" placeholder="Identifiant">
<input id="newPass" placeholder="Mot de passe">
<button onclick="addUser()">Ajouter</button>
</div>

<div class="box">
<h3>ğŸ“Š Heures pointÃ©es</h3>
<div id="hoursReport"></div>
</div>

<div class="box">
<h3>ğŸ“… ActivitÃ© planning</h3>
<div id="planningReport"></div>
</div>
</section>

<footer>&copy; 2026 Garage La Plume</footer>

<script>
/* NAV */
function showPage(id){
document.querySelectorAll(".page").forEach(p=>p.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
}

/* USERS INIT */
if(!localStorage.users){
localStorage.users=JSON.stringify([
{user:"patron",pass:"patron123",role:"Patron"},
{user:"jean",pass:"jean123",role:"EmployÃ©"},
{user:"paul",pass:"paul123",role:"EmployÃ©"}
]);
}

let currentUser=null;

/* LOGIN */
function login(){
const users=JSON.parse(localStorage.users);
const u=users.find(x=>x.user===loginUser.value&&x.pass===loginPass.value);
if(!u){msg.textContent="Identifiants incorrects";return;}
currentUser=u;
roleText.textContent=`${u.user} (${u.role})`;
loginBox.classList.add("hidden");
dashboard.classList.remove("hidden");

if(u.role==="Patron"){
serverLink.classList.remove("hidden");
loadServer();
}
loadCalendar();loadClock();
}

/* LOGOUT */
function logout(){
dashboard.classList.add("hidden");
loginBox.classList.remove("hidden");
serverLink.classList.add("hidden");
currentUser=null;
showPage('accueil');
}

/* PLANNING */
function addEvent(){
if(!eventDate.value||!eventText.value)return;
const data=JSON.parse(localStorage.events||"{}");
const key=currentUser.user+"_"+eventDate.value;
(data[key]=data[key]||[]).push(eventText.value);
localStorage.events=JSON.stringify(data);
eventText.value="";
loadCalendar();
}

/* CALENDAR */
function loadCalendar(){
calendar.innerHTML="";
const d=new Date();
const days=new Date(d.getFullYear(),d.getMonth()+1,0).getDate();
const data=JSON.parse(localStorage.events||"{}");
for(let i=1;i<=days;i++){
const date=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(i).padStart(2,"0")}`;
const key=currentUser.user+"_"+date;
const div=document.createElement("div");
div.className="day";
div.innerHTML=`<strong>${i}</strong>`;
(data[key]||[]).forEach(e=>{
const ev=document.createElement("div");
ev.className="event";ev.textContent=e;div.appendChild(ev);
});
calendar.appendChild(div);
}
}

/* POINTAGE */
function pointeuse(type){
const c=JSON.parse(localStorage.clock||"{}");
(c[currentUser.user]=c[currentUser.user]||[]).push(type+" "+new Date().toLocaleString());
localStorage.clock=JSON.stringify(c);
loadClock();
}

function loadClock(){
clockList.innerHTML="";
(JSON.parse(localStorage.clock||"{}")[currentUser.user]||[])
.forEach(l=>{
const li=document.createElement("li");
li.textContent=l;
clockList.appendChild(li);
});
}

/* SERVER MANAGEMENT */
function loadServer(){
loadServerUsers();
loadReports();
}

function loadServerUsers(){
serverUserList.innerHTML="";
JSON.parse(localStorage.users).forEach(u=>{
const li=document.createElement("li");
li.innerHTML=`${u.user} (${u.role})
<button onclick="resetPass('${u.user}')">Reset MDP</button>
<button onclick="deleteUser('${u.user}')">Supprimer</button>`;
serverUserList.appendChild(li);
});
}

function addUser(){
const users=JSON.parse(localStorage.users);
users.push({user:newUser.value,pass:newPass.value,role:"EmployÃ©"});
localStorage.users=JSON.stringify(users);
loadServer();
}

function resetPass(user){
const users=JSON.parse(localStorage.users);
const u=users.find(x=>x.user===user);
u.pass="1234";
localStorage.users=JSON.stringify(users);
alert("Mot de passe rÃ©initialisÃ© Ã  1234");
}

function deleteUser(user){
let users=JSON.parse(localStorage.users);
users=users.filter(u=>u.user!==user);
localStorage.users=JSON.stringify(users);
loadServer();
}

/* REPORTS */
function loadReports(){
const clock=JSON.parse(localStorage.clock||"{}");
hoursReport.innerHTML="";
for(let u in clock){
hoursReport.innerHTML+=`<p>${u} : ${clock[u].length} pointages</p>`;
}

const events=JSON.parse(localStorage.events||"{}");
planningReport.innerHTML=`<p>Total Ã©vÃ©nements : ${Object.keys(events).length}</p>`;
}
</script>

</body>
</html>
